(()=>{"use strict";var e={168:e=>{e.exports=function(e){return e[1]}},262:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},357:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},433:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,d,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(o)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(r[c]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);o&&r[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),d&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=d):l[4]="".concat(d)),t.push(l))}},t}},598:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var d=void 0!==n.layer;d&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,d&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},626:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},657:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},673:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var a={},r=[],i=0;i<e.length;i++){var c=e[i],s=o.base?c[0]+o.base:c[0],l=a[s]||0,p="".concat(s," ").concat(l);a[s]=l+1;var m=n(p),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)t[m].references++,t[m].updater(u);else{var y=d(u,o);o.byIndex=i,t.splice(i,0,{identifier:p,updater:y,references:1})}r.push(p)}return r}function d(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,d){var a=o(e=e||[],d=d||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var i=n(a[r]);t[i].references--}for(var c=o(e,d),s=0;s<a.length;s++){var l=n(a[s]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},988:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(168),d=n.n(o),a=n(433),r=n.n(a)()(d());r.push([e.id,":root {\n  --base-font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  --base-bg: #f5f5f5;\n  --primary-color: #007bff;\n  --primary-color-dark: #0056b3;\n  --secondary-color: #00a1ff;\n  --white: #ffffff;\n  --border-color: #ddd;\n  --shadow-color: rgba(0, 0, 0, 0.25);\n}\n\nbody {\n  font-family: var(--base-font);\n  background-color: var(--base-bg);\n  margin: 0;\n  padding: 0;\n}\n\n/* Header */\nheader {\n  background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));\n  color: var(--white);\n  padding: 1rem;\n  text-align: center;\n  box-shadow: 0 0.5rem 10px rgba(0,0,0,0.1);\n}\n\n/* Main Layout */\nmain {\n  display: flex;\n  box-sizing: border-box;\n  padding: 0;\n}\n\n/* Aside & Section */\naside, section {\n  padding: 1rem;\n}\n\n/* Projects Sidebar */\n#projects-section {\n  width: 250px;\n  background-color: var(--white);\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  position: sticky;\n  top: 0;\n  border-right: 1px solid var(--border-color);\n  overflow: auto;\n}\n\n/* Inputs & Buttons */\ninput, button, select, textarea {\n  padding: 0.5rem;\n  margin-top: 0.5rem;\n  font-size: 1rem;\n  box-sizing: border-box;\n}\n\n.add-btn {\n  background-color: var(--primary-color);\n  color: var(--white);\n  border: none;\n  padding: 10px;\n  border-radius: 0.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  margin-top: 10px;\n  transition: background 0.2s;\n}\n\n.add-btn:hover {\n  background-color: var(--primary-color-dark);\n}\n\n/* Modal Overlay */\n.modal {\n  display: none;\n  position: fixed;\n  z-index: 100;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0, 0, 0, 0.6);\n}\n\n/* Modal Content */\n.modal-content {\n  background-color: var(--white);\n  border-radius: 0.5rem;\n  padding: 2rem;\n  margin: 8% auto;\n  width: 90%;\n  max-width: 500px;\n  box-shadow: 0 0.5rem 10px rgba(0, 0, 0, 0.3);\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n/* Títulos y etiquetas en los modales */\n.modal-content h2 {\n  margin: 0 0 1rem;\n  text-align: center;\n  font-size: 1.25rem;\n}\n\n.modal-content label {\n  font-weight: bold;\n  margin-top: 5px;\n}\n\n/* Inputs, selects y textareas en los modales */\n.modal-content input,\n.modal-content select,\n.modal-content textarea {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  font-size: 0.8rem;\n}\n\n/* Textareas */\n.modal-content textarea {\n  resize: vertical;\n  min-height: 60px;\n}\n\n/* Botón de acción en el modal */\n.modal-content button {\n  align-self: center;\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 0.5rem;\n  background-color: var(--primary-color);\n  color: var(--white);\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.modal-content button:hover {\n  background-color: var(--primary-color-dark);\n}\n\n/* Botón de cierre en modales */\n.close {\n  color: #aaa;\n  position: absolute;\n  top: 10px;\n  right: 15px;\n  font-size: 1.75rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: color 0.3s;\n}\n\n.close:hover,\n.close:focus {\n  color: #000;\n  text-decoration: none;\n}\n\n/* List Items */\nli {\n  list-style: none;\n  padding: 0.75rem;\n  border-bottom: 1px solid #e0e0e0;\n  margin: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: background-color 0.2s ease;\n}\n\nli:last-child {\n  border-bottom: none;\n}\n\nli:hover {\n  background-color: #fafafa;\n}\n\n/* Task Item */\n.task-item {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 0.75rem 0;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.task-info {\n  flex-grow: 1;\n  margin-left: 10 px;\n  text-align: left;\n}\n\n/* Menu Options */\n.menu-option {\n  cursor: pointer;\n  font-size: 0.9rem;\n  padding: 5px 10px;\n  transition: background-color 0.2s ease;\n}\n\n.menu-option:hover {\n  background-color: #f0f0f0;\n}\n\n/* Menu Button */\n.menu-btn {\n  background: none;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  font-size: 1.2rem;\n  background-color: var(--primary-color);\n  color: var(--white);\n  border-radius: 0.5rem;\n  transition: background 0.2s;\n}\n\n.menu-btn:hover {\n  background-color: var(--primary-color-dark);\n}\n\n/* Task Card (para la tarjeta de información completa) */\n.task-card {\n  background-color: var(--white);\n  border-radius: 0.5rem;\n  padding: 1.5rem;\n  width: 90%;\n  max-width: 500px;\n  box-shadow: 0 0.5rem 10px rgba(0, 0, 0, 0.3);\n}\n\n",""]);const i=r}},t={};function n(o){var d=t[o];if(void 0!==d)return d.exports;var a=t[o]={id:o,exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o=n(673),d=n.n(o),a=n(598),r=n.n(a),i=n(262),c=n.n(i),s=n(657),l=n.n(s),p=n(357),m=n.n(p),u=n(626),y=n.n(u),g=n(988),v={};v.styleTagTransform=y(),v.setAttributes=l(),v.insert=c().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=m(),d()(g.A,v),g.A&&g.A.locals&&g.A.locals;let k=[],f=0;function x(){localStorage.setItem("projects",JSON.stringify(k))}function h(e,t,n){k[e].todos[t]=n,x()}function b(){const e=[];return k.forEach(((t,n)=>{t.todos.forEach(((t,o)=>{t.completed||e.push({...t,projectIndex:n,taskIndex:o})}))})),e}function E(){const e=[];return k.forEach(((t,n)=>{t.todos.forEach(((t,o)=>{t.completed&&e.push({...t,projectIndex:n,taskIndex:o})}))})),e}function I(e,t,n){let o=document.createElement("div");o.id="task-card-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.backgroundColor="rgba(0, 0, 0, 0.5)",o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",o.style.zIndex="200",o.addEventListener("click",(e=>{e.target===o&&o.remove()}));const d=document.createElement("div");if(d.classList.add("task-card"),d.style.backgroundColor="#fff",d.style.padding="1rem",d.style.borderRadius="5px",d.style.boxShadow="0 0 10px rgba(0,0,0,0.25)",e.title&&""!==e.title.trim()){const t=document.createElement("h3");t.textContent=e.title,d.appendChild(t)}if(e.description&&""!==e.description.trim()){const t=document.createElement("p");t.textContent=e.description,d.appendChild(t)}if(e.dueDate&&""!==e.dueDate.trim()){const t=document.createElement("p");t.textContent=`Due Date: ${e.dueDate}`,d.appendChild(t)}const a=document.createElement("p");if(a.textContent=`Priority: ${e.priority}`,d.appendChild(a),e.notes&&""!==e.notes.trim()){const t=document.createElement("p");t.textContent=`Notes: ${e.notes}`,d.appendChild(t)}if(e.checklist&&e.checklist.length>0){const o=e.checklist.filter((e=>"object"==typeof e?e.title&&""!==e.title.trim():e&&""!==e.trim()));if(o.length>0){const a=document.createElement("div"),r=document.createElement("h4");r.textContent="Subtasks",a.appendChild(r),o.forEach(((o,d)=>{const r=document.createElement("label");r.style.display="block";const i=document.createElement("input");i.type="checkbox";const c="object"==typeof o&&o.completed;i.checked=c,r.appendChild(i);const s=document.createElement("span");s.textContent="object"==typeof o?o.title:o,r.appendChild(s),i.addEventListener("change",(()=>{"object"!=typeof e.checklist[d]?e.checklist[d]={title:o,completed:i.checked}:e.checklist[d].completed=i.checked,h(t,n,e)})),a.appendChild(r)})),d.appendChild(a)}}const r=document.createElement("button");r.textContent="Edit",r.classList.add("edit-task-card-btn"),r.style.marginRight="10px",r.addEventListener("click",(e=>{e.stopPropagation();const d=new CustomEvent("editTask",{detail:{projectIndex:t,taskIndex:n}});document.dispatchEvent(d),o.remove()})),d.appendChild(r);const i=document.createElement("button");i.textContent="Close",i.classList.add("close-task-card"),i.addEventListener("click",(()=>{o.remove()})),d.appendChild(i),o.appendChild(d),document.body.appendChild(o)}function C(){const e=document.getElementById("projects-list");e.innerHTML="",[{name:"Upcoming",type:"special",specialName:"upcoming"},{name:"Completed",type:"special",specialName:"completed"}].forEach((t=>{const n=document.createElement("li");n.textContent=t.name,n.style.cursor="pointer",n.addEventListener("click",(()=>{const e=new CustomEvent("projectSelected",{detail:{type:"special",specialName:t.specialName}});document.dispatchEvent(e)})),e.appendChild(n)})),k.forEach(((t,n)=>{const o=document.createElement("li"),d=document.createElement("span");d.textContent=t.name,d.style.cursor="pointer",d.addEventListener("click",(()=>{const e=new CustomEvent("projectSelected",{detail:{type:"project",index:n}});document.dispatchEvent(e)})),o.appendChild(d);const a=document.createElement("button");a.textContent="⋮",a.classList.add("menu-btn"),a.style.marginLeft="10px",a.style.border="none",a.style.backgroundColor="transparent",a.addEventListener("click",(e=>{e.stopPropagation();let t=o.querySelector(".menu-options");if(t)return void t.remove();const d=document.createElement("div");d.classList.add("menu-options");const a=document.createElement("div");a.textContent="Edit",a.classList.add("menu-option"),a.addEventListener("click",(e=>{e.stopPropagation();const t=new CustomEvent("editProject",{detail:{index:n}});document.dispatchEvent(t),d.remove()})),d.appendChild(a);const r=document.createElement("div");r.textContent="Delete",r.classList.add("menu-option"),r.addEventListener("click",(e=>{e.stopPropagation();const t=new CustomEvent("projectDelete",{detail:{index:n}});document.dispatchEvent(t),d.remove()})),d.appendChild(r),o.appendChild(d)})),o.appendChild(a),e.appendChild(o)}))}function j(e,t){document.getElementById("current-project-title").textContent=e;const n=document.getElementById("todos-list");n.innerHTML="",t.forEach((e=>{const t=document.createElement("li");t.classList.add("task-item"),t.dataset.projectIndex=e.projectIndex,t.dataset.taskIndex=e.taskIndex;const o=document.createElement("input");o.type="checkbox",o.checked=e.completed,o.style.appearance="none",o.style.webkitAppearance="none",o.style.mozAppearance="none",o.style.width="20px",o.style.height="20px",o.style.outline="none",o.style.borderRadius="3px",o.style.cursor="pointer",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="center",o.style.backgroundSize="80%";const d="Low"===(a=e.priority)?{border:"gray",transparent:"rgba(165, 165, 165, 0.3)"}:"Medium"===a?{border:"orange",transparent:"rgba(255, 165, 0, 0.3)"}:"High"===a?{border:"red",transparent:"rgba(255, 0, 0, 0.3)"}:void 0;var a;function r(){if(o.checked){o.style.backgroundColor=d.border;const e="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="white">\n      <path d="M6.173 11.414l-3.883-3.883 1.414-1.414 2.469 2.47 5.883-5.883 1.414 1.414z"/>\n    </svg>');o.style.backgroundImage=`url("${e}")`}else o.style.backgroundColor=d.transparent,o.style.backgroundImage=""}o.style.border=`3px solid ${d.border}`,o.style.backgroundColor=o.checked?d.border:d.transparent,r(),o.addEventListener("change",(()=>{r();const t=new CustomEvent("todoToggle",{detail:{projectIndex:e.projectIndex,taskIndex:e.taskIndex,completed:o.checked}});document.dispatchEvent(t)})),t.appendChild(o);const i=document.createElement("span");i.classList.add("task-info"),i.textContent=`${e.title} - ${e.dueDate||""}`,i.style.cursor="pointer",i.addEventListener("click",(()=>{I(e,e.projectIndex,e.taskIndex)})),t.appendChild(i);const c=document.createElement("button");c.textContent="⋮",c.classList.add("menu-btn"),c.style.marginLeft="10px",c.style.border="none",c.style.backgroundColor="transparent",c.addEventListener("click",(n=>{n.stopPropagation();let o=t.querySelector(".menu-options");if(o)return void o.remove();const d=document.createElement("div");d.classList.add("menu-options");const a=document.createElement("div");a.textContent="Edit",a.classList.add("menu-option"),a.addEventListener("click",(t=>{t.stopPropagation();const n=new CustomEvent("editTask",{detail:{projectIndex:e.projectIndex,taskIndex:e.taskIndex}});document.dispatchEvent(n),d.remove()})),d.appendChild(a);const r=document.createElement("div");r.textContent="Delete",r.classList.add("menu-option"),r.addEventListener("click",(t=>{t.stopPropagation();const n=new CustomEvent("todoDelete",{detail:{projectIndex:e.projectIndex,taskIndex:e.taskIndex}});document.dispatchEvent(n),d.remove()})),d.appendChild(r),t.appendChild(d)})),t.appendChild(c),n.appendChild(t)}))}let w={type:"special",name:"upcoming"};function B(e){return e.sort(((e,t)=>{const n=e.dueDate?new Date(e.dueDate):null,o=t.dueDate?new Date(t.dueDate):null;return!n&&o?1:n&&!o?-1:n||o?n-o:0}))}document.addEventListener("projectSelected",(e=>{if("special"===e.detail.type)w={type:"special",name:e.detail.specialName},document.getElementById("add-task-btn").style.display="none","upcoming"===e.detail.specialName?j("Upcoming Tasks",B(b())):"completed"===e.detail.specialName&&j("Completed Tasks",B(E()));else if("project"===e.detail.type){w={type:"project",index:e.detail.index},t=e.detail.index,f=t,document.getElementById("add-task-btn").style.display="block";const n=k[e.detail.index].todos.map(((t,n)=>({...t,projectIndex:e.detail.index,taskIndex:n})));j(`${k[e.detail.index].name} Tasks`,B(n))}var t}));const L=document.getElementById("project-modal"),T=document.getElementById("task-modal");document.getElementById("add-project-btn").addEventListener("click",(()=>{L.style.display="block"})),document.getElementById("add-task-btn").addEventListener("click",(()=>{"project"===w.type?T.style.display="block":alert("Please select a custom project to add tasks.")})),document.getElementById("close-project-modal").addEventListener("click",(()=>{L.style.display="none"})),document.getElementById("close-task-modal").addEventListener("click",(()=>{T.style.display="none"})),window.addEventListener("click",(e=>{e.target===L&&(L.style.display="none"),e.target===T&&(T.style.display="none")})),document.getElementById("modal-add-project-btn").addEventListener("click",(()=>{const e=document.getElementById("modal-project-input");var t;""!==(t=e.value).trim()&&(k.push({name:t,todos:[]}),x()),e.value="",C(),L.style.display="none";const n=k.length-1,o=new CustomEvent("projectSelected",{detail:{type:"project",index:n}});document.dispatchEvent(o)})),document.getElementById("modal-add-task-btn").addEventListener("click",(()=>{if("project"!==w.type)return;const e=document.getElementById("modal-task-title").value.trim();if(!e)return void alert("Task title is required.");var t;(t={title:e,description:document.getElementById("modal-task-desc").value,dueDate:document.getElementById("modal-task-due").value,priority:document.getElementById("modal-task-priority").value}).completed=!1,t.notes="",t.checklist=[],k[f].todos.push(t),x(),document.getElementById("modal-task-title").value="",document.getElementById("modal-task-desc").value="",document.getElementById("modal-task-due").value="",document.getElementById("modal-task-priority").value="Medium";const n=k[w.index].todos.map(((e,t)=>({...e,projectIndex:w.index,taskIndex:t})));j(`${k[w.index].name} Tasks`,B(n)),T.style.display="none"})),document.addEventListener("todoToggle",(e=>{var t,n,o;if(t=e.detail.projectIndex,n=e.detail.taskIndex,o=e.detail.completed,k[t].todos[n].completed=o,x(),"special"===w.type)"upcoming"===w.name?j("Upcoming Tasks",B(b())):"completed"===w.name&&j("Completed Tasks",B(E()));else if("project"===w.type){const e=k[w.index].todos.map(((e,t)=>({...e,projectIndex:w.index,taskIndex:t})));j(`${k[w.index].name} Tasks`,B(e))}})),document.addEventListener("projectDelete",(e=>{var t;confirm("Are you sure you want to delete this project?")&&(t=e.detail.index,k.splice(t,1),f>=k.length&&(f=k.length-1),x(),C(),"project"===w.type&&w.index===e.detail.index?(w={type:"special",name:"upcoming"},document.getElementById("add-task-btn").style.display="none",j("Upcoming Tasks",B(b()))):"project"===w.type&&w.index>e.detail.index&&(w.index=w.index-1))})),document.addEventListener("todoDelete",(e=>{if(confirm("Are you sure you want to delete this task?"))if(t=e.detail.projectIndex,n=e.detail.taskIndex,k[t].todos.splice(n,1),x(),"special"===w.type)"upcoming"===w.name?j("Upcoming Tasks",B(b())):"completed"===w.name&&j("Completed Tasks",B(E()));else if("project"===w.type){const e=k[w.index].todos.map(((e,t)=>({...e,projectIndex:w.index,taskIndex:t})));j(`${k[w.index].name} Tasks`,B(e))}var t,n}));let S=null;document.addEventListener("editProject",(e=>{S=e.detail.index,document.getElementById("edit-project-name").value=k[S].name,document.getElementById("edit-project-modal").style.display="block"})),document.getElementById("close-edit-project-modal").addEventListener("click",(()=>{document.getElementById("edit-project-modal").style.display="none"})),document.getElementById("save-edit-project-btn").addEventListener("click",(()=>{const e=document.getElementById("edit-project-name").value.trim();e?(k[S].name=e,x(),C(),document.getElementById("edit-project-modal").style.display="none"):alert("Project name is required.")}));let D=null,M=null,P=null;document.addEventListener("editTask",(e=>{D=e.detail.projectIndex,M=e.detail.taskIndex,P=k[D].todos[M],document.getElementById("edit-task-title").value=P.title,document.getElementById("edit-task-desc").value=P.description||"",document.getElementById("edit-task-due").value=P.dueDate||"",document.getElementById("edit-task-priority").value=P.priority||"Medium",document.getElementById("edit-task-notes").value=P.notes||"",document.getElementById("edit-task-checklist").value=P.checklist.join("\n"),document.getElementById("edit-task-modal").style.display="block"})),document.getElementById("close-edit-task-modal").addEventListener("click",(()=>{document.getElementById("edit-task-modal").style.display="none"})),document.getElementById("save-edit-task-btn").addEventListener("click",(()=>{const e=document.getElementById("edit-task-title").value.trim();if(e){if(P.title=e,P.description=document.getElementById("edit-task-desc").value,P.dueDate=document.getElementById("edit-task-due").value,P.priority=document.getElementById("edit-task-priority").value,P.notes=document.getElementById("edit-task-notes").value,P.checklist=document.getElementById("edit-task-checklist").value.split("\n"),h(D,M,P),"project"===w.type&&w.index==D){const e=k[D].todos.map(((e,t)=>({...e,projectIndex:D,taskIndex:t})));j(`${k[D].name} Tasks`,B(e))}else"special"===w.type&&("upcoming"===w.name?j("Upcoming Tasks",B(b())):"completed"===w.name&&j("Completed Tasks",B(E())));document.getElementById("edit-task-modal").style.display="none"}else alert("Task title is required.")})),document.addEventListener("taskCard",(e=>{const{projectIndex:t,taskIndex:n}=e.detail;I(k[t].todos[n],t,n)})),function(){const e=localStorage.getItem("projects");k=e?JSON.parse(e):[],f=0}(),C(),w={type:"special",name:"upcoming"},j("Upcoming Tasks",B(b())),document.getElementById("project-modal").style.display="none",document.getElementById("task-modal").style.display="none",document.getElementById("edit-task-modal").style.display="none",document.getElementById("edit-project-modal").style.display="none"})();